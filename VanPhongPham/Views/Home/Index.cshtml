@using Microsoft.AspNetCore.Http
@using VanPhongPhamDTO.Entities
@model Tuple<List<Slider>, List<Producer>, List<Categories>, List<Category_Detail>, List<Products>, List<Products>>
@{
    ViewData["Title"] = "Văn phòng phẩm Đức Thịnh";
    int n = 0, m = 0, b = 0, c = 0, d = 0, f = 0;
}
<section class="content container pt-1 pb-3">
    <div class="section-showcase mt-4">
        <div class="container p-0">
            <div class="block-main-slider">
                <!-- carousel - chuyển ảnh -->
                <div id="slides" class="carousel slides" data-ride="carousel">
                    <ul class="carousel-indicators">
                        @foreach (var item in Model.Item1)
                        {
                            @if (item.SLider_Id == 1)
                            {
                                <li data-target="#slides" data-slide-to="0" class="active"></li>
                            }
                            @if (item.SLider_Id != 1)
                            {
                                <li data-target="#slides" data-slide-to="@(item.SLider_Id)"></li>
                            }
                        }
                    </ul>
                    <div class="carousel-inner">
                        @foreach (var item in Model.Item1)
                        {


                            @if (item.SLider_Id == 1)
                            {
                                <div class="carousel-item active">
                                    <img class="d-block w-100" src="@("/images/" + item.SLider_Images)" alt="">
                                    @if (item.Topic != null)
                                    {
                                        <div class="carousel-caption">
                                            <h4 class="display-5" style="text-transform: uppercase; margin-top: 70px; color: #80d0d3;">@item.Topic</h4>
                                            <h5 style="color: #80d0d3;">@item.Slider_Description</h5>
                                            <button type="button" class="btn btn-light btn-lg">
                                                Ấn vào đây!
                                            </button>
                                        </div>
                                    }
                                </div>
                            }
                            @if (item.SLider_Id != 1)
                            {
                                <div class="carousel-item">
                                    <img class="d-block w-100" src="@("/images/" + item.SLider_Images)" alt="">
                                    @if (item.Topic != null)
                                    {
                                        <div class="carousel-caption">
                                            <h1 class="display-2">@item.Topic</h1>
                                            <h3>@item.Slider_Description</h3>
                                            <button type="button" class="btn btn-light btn-lg">
                                                click here!
                                            </button>
                                        </div>
                                    }
                                </div>
                            }
                        }
                        <a class="carousel-control-prev" href="#slides" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#slides" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="section-services">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 services-item mb-2">
                    <div class="chon">
                        <div class="icon">
                            <i class="fas fa-plane" style=" color: aquamarine; font-size: 22px;"></i>
                        </div>
                        <div class="info mt-2">
                            <a href="#">
                                <h5>Mã giảm giá</h5>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 services-item mb-2">
                    <div class="chon">
                        <div class="icon">
                            <i class="fas fa-shipping-fast" style="color: orange; font-size: 22px;"></i>
                        </div>
                        <div class="info mt-2">
                            <a href="#">
                                <h5>Giao hàng siêu tốc</h5>
                            </a>
                        </div>
                    </div>

                </div>
                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 services-item mb-2">
                    <div class="chon">
                        <div class="icon">
                            <i class="fas fa-exchange-alt" style="color: darkblue;font-size: 22px;"></i>
                        </div>
                        <div class="info mt-2">
                            <a href="#">
                                <h5>Đổi trả 30 ngày</h5>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 services-item mb-2">
                    <div class="chon">
                        <div class="icon">
                            <i class="fas fa-globe-europe" style="color: cornflowerblue; font-size: 22px;"></i> 
                        </div>
                        <div class="info mt-2">
                            <a href="#">
                                <h5>Hỗ trợ 24/7</h5>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="services"></div>
        </div>
    </div>
    <div class="section-top-sale">
        <div class="container">
            <h3 class="like text-center"> Sản phẩm giảm giá</h3>
            <ul id="sliderHotProducts">
                @foreach (var item in Model.Item5)
                {
                    @if (item.NewPrice != 0)
                    {
                        <li>
                            <a href="/Home/ProductDetail/@(item.Product_Id)"><img src="@("/images/"+ item.Product_Images)" alt="" class="img-circle img-flexisel"></a>
                            <div class="liked-product">
                                <a href="#" class="like-name"> @item.Product_Name</a>
                                <p><span class="item-price" style="font-weight:bold; color:brown;">@(String.Format("{0:0,0 vnđ}", (int)item.NewPrice))</span></p>
                                <p class="sale pt-2" style="text-decoration: line-through; color: cadetblue;">@(String.Format("{0:0,0 vnđ}", (int)item.Price))</p>
                                <input type="submit" class="btn btn-info btnAddToCart" onclick="AddToCart(@(item.Product_Id))" value="Thêm vào giỏ hàng">
                            </div>
                        </li>
                    }

                }

            </ul>
        </div>
    </div>




    @foreach (var item in Model.Item3)
    {
        <div class="section-menu-second">
            <div class="container p-0">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="@("#taps" + Convert.ToString(b++))" data-toggle="tab">
                            @item.Category_Name
                        </a>
                    </li>
                    @foreach (var gd in Model.Item4)
                    {


                        @if (gd.Category_Id == item.Category_Id)
                        {
                            <li class="nav-item">
                                <a class="nav-link" href="@("#tap" + Convert.ToString(n++))" data-toggle="tab">@gd.CD_Name</a>
                            </li>
                        }
                    }
                </ul>
            </div>
        </div>
        <div class="section-render-body">
            <div class="tab-content">
                <div id="@("taps" + Convert.ToString(c++))" class="tab-pane active">
                    <div class="section-new-product">
                        <div class="container">
                            <a href="/Category/Category/@item.Category_Id">
                                <h3 class="text-center">@item.Category_Name</h3>
                            </a>
                            <div class="row">
                                @foreach (var products in Model.Item4)
                                {
                                    @if (products.Category_Id == item.Category_Id)
                                    {
                                        @foreach (var p in Model.Item5)
                                        {
                                            @if (products.CD_Id == p.CD_Id)
                                            {
                                                <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 show_button @("show_more"+Convert.ToString(d))">
                                                    <div class="thumbnail">
                                                        <a href="@Url.Action("ProductDetail", "Home", new { id =  p.Product_Id })"> <img src="@("/images/" + p.Product_Images)" alt=""></a>
                                                        <div class="chon-mua">
                                                            <button class="btn btn-info btn-block" onclick="location.href='@Url.Action("ProductDetail", "Home", new { id =  p.Product_Id }) '">Xem chi tiết</button>
                                                            <button class="btn btn-info btn-block" id="btnAdd" onclick="AddToCart('@(p.Product_Id)')">Thêm giỏ hàng</button>

                                                        </div>
                                                        <div class="caption">
                                                            <div class="proName mb-1" style="height: 70px;">@p.Product_Name</div>
                                                            <div class="proPrice">
                                                                @if ((int)p.Price == 0)
                                                                {
                                                                    <span class="proOfPrice" style="text-decoration: none;">@p.Status</span>}
                                                                else
                                                                {
                                                                    @if (p.NewPrice == 0)
                                                                    {
                                                                        <span class="proOfPrice" style="text-decoration: none;">@(String.Format("{0:0,0 vnđ}", (int)p.Price))</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="proOfPrice" style="text-decoration: line-through;">@(String.Format("{0:0,0 vnđ}", (int)p.Price))</span>
                                                                        <span class="proPriceDiscount">@(String.Format("{0:0,0 vnđ}", (int)p.NewPrice))</span>
                                                                    }
                                                                }

                                                            </div>
                                                            @foreach (var np in Model.Item6)
                                                            {
                                                                @if (np.Product_Id == p.Product_Id)
                                                                {
                                                                    <img src="/images/new2.png" alt="" class="inew">
                                                                }
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        }
                                    }
                                }
                            </div>
                            <div class="mb-2" style="height:50px;">
                                <button class="btn btn-info d-block mx-auto @("loadMore"+Convert.ToString(d))">Xem thêm</button>
                            </div>
                            @{ d++;}
                        </div>
                    </div>
                </div>

                @foreach (var gd in Model.Item4)
                {

                    @if (gd.Category_Id == item.Category_Id)
                    {
                        <div id="@("tap" + Convert.ToString(m++))" class="tab-pane fade in">
                            <div class="section-new-product">
                                <div class="container">
                                    <a href="/Category/CategoryDetail/@gd.CD_Id">
                                        <h3 class="text-center">@gd.CD_Name</h3>
                                    </a>
                                    <div class="row">

                                        @foreach (var products in Model.Item5)
                                        {
                                            @if (gd.CD_Id == products.CD_Id)
                                            {
                                                <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 show_button @("show_more_"+Convert.ToString(f))">
                                                    <div class="thumbnail">
                                                        <a href="@Url.Action("ProductDetail", "Home", new { id =  products.Product_Id })"> <img src="@("/images/" + products.Product_Images)" alt=""></a>
                                                        <div class="chon-mua">
                                                            <button class="btn btn-info btn-block" onclick="location.href='@Url.Action("ProductDetail", "Home", new { id =  products.Product_Id }) '">Xem chi tiết</button>                                                          
                                                            <button class="btn btn-info btn-block" id="btnAdd" onclick="AddToCart('@(products.Product_Id)')">Thêm giỏ hàng</button>
                                                        </div>
                                                        <div class="caption">
                                                            <div class="proName mb-1" style="height: 70px;">@products.Product_Name</div>
                                                            <div class="proPrice">
                                                                @if ((int)products.Price == 0)
                                                                {
                                                                    <span class="proOfPrice" style="text-decoration: none;">@products.Status</span>
                                                                }
                                                                else
                                                                {
                                                                    @if (products.NewPrice == 0)
                                                                    {
                                                                        <span class="proOfPrice" style="text-decoration: none;">@(String.Format("{0:0,0 vnđ}", (int)products.Price))</span>
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="proOfPrice" style="text-decoration: line-through;">@(String.Format("{0:0,0 vnđ}", (int)products.Price))</span>
                                                                        <span class="proPriceDiscount">@(String.Format("{0:0,0 vnđ}", (int)products.NewPrice))</span>
                                                                    }
                                                                }
                                                            </div>
                                                            @foreach (var np in Model.Item6)
                                                            {
                                                                @if (np.Product_Id == products.Product_Id)
                                                                {
                                                                    <img src="/images/new2.png" alt="" class="inew">
                                                                }
                                                            }

                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        }
                                    </div>
                                    <div class="mb-2" style="height:50px;">
                                        <button class="btn btn-info d-block mx-auto @("loadMore_"+Convert.ToString(f))">Xem thêm</button>
                                    </div>
                                    @{ f++;}
                                </div>
                            </div>
                        </div>

                    }

                }
            </div>
        </div>


    }
    <div class="section-list-brand">
        <div class="container">
            <h3 class="like text-center">Thương hiệu</h3>
            <ul id="flexiselBrand">
                @foreach (var item in Model.Item2)
                {
                    @if (item.Producer_Images != "" && item.Producer_Images != null)
                    {
                        <li>
                            <a href="/Products/ProductsByBrand/@(item.Producer_Id)"><img src="@("/images/"+ item.Producer_Images)" alt=""></a>
                        </li>
                    }
                }
            </ul>
        </div>
    </div>
</section>
<form style="display: none;">
    <input type="text" id="User_Id" name="User_Id" value="@(Context.Session.GetInt32("userid"))" />
    <input type="text" id="Product_Id" name="Product_Id" value="" />
    <input type="text" id="Invoice_Date" name="Invoice_Date" value="abc" />
    <input type="text" id="Amount" name="Amount" value="1" />
</form>
<script type="text/javascript">
    s
    function AddCart() {
        var obj = {
            User_Id: parseInt($("#User_Id").val()),
            Product_Id: parseInt($("#Product_Id").val()),
            Invoice_Date: $('#Invoice_Date').val(),
            Amount: parseInt($("#Amount").val())
        };
        $.ajax({
            url: "/Cart/AddCart",
            data: JSON.stringify(obj),
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            type: "POST",
            traditional: true,
            success: function (result) {
                confirm("Đã thêm một sản phẩm vào giỏ hàng!");
                var count = parseInt($("#counts").text()) + 1;
                $("#counts").html(count);
                //location.reload();
            },
            error: function (errorMessage) {
                alert(errorMessage.responseText);
            }
        });
    }
    function linkLogin() {
        $(".linklogin").attr("href", "/Account/Login/1");
        $(".linkregister").attr("href", "/Account/Login/2");
    }

</script>
@*<script type="text/javascript">
        function login() {
            //Lấy giá trị trong textbox
            var obj = {
                UserName: $("#UserName").val(),
                Password: $("#Password").val(),

            };
            $.ajax({
                url: "/Account/LoginModal",
                data: JSON.stringify(obj),
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                type: "POST",
                success: function (result) {
                    location.reload();
                    //Ẩn modal
                    $("#login").modal("hide");
                },
                error: function (errorMessage) {
                    alert(errorMessage.responseText);
                }
            });
    </script>*@
